{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-md-8 offset-md-2">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h2>Profile</h2>
                    <a href="{{ url_for('edit_profile') }}" class="btn btn-primary">Edit Profile</a>
                </div>
                <div class="card-body">
                    <div class="profile-section mb-4">
                        <h3>{{ user.username or user.email }}</h3>
                        {% if user.first_name or user.last_name %}
                            <p class="text-muted">{{ user.first_name }} {{ user.last_name }}</p>
                        {% endif %}
                    </div>

                    {% if user.bio %}
                    <div class="profile-section mb-4">
                        <h4>About Me</h4>
                        <p>{{ user.bio }}</p>
                    </div>
                    {% endif %}

                    <div class="profile-section mb-4">
                        <h4>Details</h4>
                        <ul class="list-unstyled">
                            {% if user.location %}
                            <li class="mb-2">
                                <strong>Location:</strong> {{ user.location }}
                            </li>
                            {% endif %}
                            {% if user.interests %}
                            <li class="mb-2">
                                <strong>Interests:</strong> {{ user.interests }}
                            </li>
                            {% endif %}
                            {% if user.audience_type %}
                            <li class="mb-2">
                                <strong>Audience Type:</strong> {{ user.audience_type }}
                            </li>
                            {% endif %}
                            {% if user.preferred_locations %}
                            <li class="mb-2">
                                <strong>Preferred Locations:</strong> {{ user.preferred_locations }}
                            </li>
                            {% endif %}
                            {% if user.event_interests %}
                            <li class="mb-2">
                                <strong>Event Interests:</strong> {{ user.event_interests }}
                            </li>
                            {% endif %}
                            {% if user.is_premium %}
                            <li class="mb-2">
                                <span class="badge bg-success">Premium Member</span>
                            </li>
                            {% endif %}
                            {% if user.birth_date %}
                            <li class="mb-2">
                                <strong>Birth Date:</strong> {{ user.birth_date.strftime('%B %d, %Y') }}
                            </li>
                            {% endif %}
                            <li class="mb-2">
                                <strong>Member Since:</strong> {{ user.created_at.strftime('%B %d, %Y') }}
                            </li>
                        </ul>
                    </div>

                    <div class="list-group mb-3">
            {% if current_user.is_organizer %}
            <a href="{{ url_for('organizer_profile') }}" class="list-group-item list-group-item-action">
              <div class="d-flex w-100 justify-content-between">
                <h5 class="mb-1">Manage Organizer Profile</h5>
                <small><i class="fas fa-building"></i></small>
              </div>
              <p class="mb-1">Update your organization details</p>
            </a>
            {% else %}
            <a href="{{ url_for('become_organizer') }}" class="list-group-item list-group-item-action">
              <div class="d-flex w-100 justify-content-between">
                <h5 class="mb-1">Become an Event Organizer</h5>
                <small><i class="fas fa-star"></i></small>
              </div>
              <p class="mb-1">Create a profile for your organization</p>
            </a>
            {% endif %}

            {% if current_user.is_venue %}
            <a href="{{ url_for('venue_profile') }}" class="list-group-item list-group-item-action">
              <div class="d-flex w-100 justify-content-between">
                <h5 class="mb-1">Manage Venue Profile</h5>
                <small><i class="fas fa-map-marker-alt"></i></small>
              </div>
              <p class="mb-1">Update your venue details</p>
            </a>
            {% else %}
            <a href="{{ url_for('become_venue') }}" class="list-group-item list-group-item-action">
              <div class="d-flex w-100 justify-content-between">
                <h5 class="mb-1">Register as a Venue</h5>
                <small><i class="fas fa-map-marker-alt"></i></small>
              </div>
              <p class="mb-1">Create a profile for your event venue</p>
            </a>
            {% endif %}

            <!-- Vendor Role -->
            {% if current_user.is_vendor %}
            <a href="{{ url_for('vendor_profile') }}" class="list-group-item list-group-item-action">
              <div class="d-flex w-100 justify-content-between">
                <h5 class="mb-1">Manage Vendor Profile</h5>
                <small><i class="fas fa-store"></i></small>
              </div>
              <p class="mb-1">Update your vendor services</p>
              {% if current_user.vendor_type %}
              <small class="text-muted">{{ current_user.vendor_type }}</small>
              {% endif %}
            </a>
            {% else %}
            <a href="{{ url_for('become_vendor') }}" class="list-group-item list-group-item-action">
              <div class="d-flex w-100 justify-content-between">
                <h5 class="mb-1">Become a Vendor</h5>
                <small><i class="fas fa-store"></i></small>
              </div>
              <p class="mb-1">Offer your services to event organizers</p>
            </a>
            {% endif %}

            <!-- Role Summary Card -->
            {% if current_user.is_organizer or current_user.is_venue or current_user.is_vendor %}
            <div class="card mt-4 border-info">
              <div class="card-header bg-info text-white">
                <h5 class="mb-0">Your Business Identity</h5>
              </div>
              <div class="card-body">
                <p>You currently have the following roles:</p>
                <ul>
                  {% if current_user.is_organizer %}
                  <li><strong>Event Organizer</strong>: You can create and manage events</li>
                  {% endif %}

                  {% if current_user.is_venue %}
                  <li><strong>Venue Provider</strong>: Your venue is listed in our directory</li>
                  {% endif %}

                  {% if current_user.is_vendor %}
                  <li><strong>Service Vendor</strong>: You offer services to event organizers</li>
                  {% endif %}
                </ul>
                <p class="text-muted">Having multiple roles allows you to manage different aspects of your business in one account.</p>
              </div>
            </div>
            {% endif %}
          </div>

                    {% if current_user.is_organizer %}
                    <div class="profile-section mb-4">
                        <h4>Organizer Profile</h4>
                        <p><strong>Organization:</strong> {{ current_user.company_name or "Not specified" }}</p>
                        <p><strong>About:</strong> {{ current_user.organizer_description or "No description provided" }}</p>
                        {% if current_user.organizer_website %}
                        <p><strong>Website:</strong> <a href="{{ current_user.organizer_website }}" target="_blank">{{ current_user.organizer_website }}</a></p>
                        {% endif %}
                        <div class="mt-3">
                            <a href="{{ url_for('organizer_profile') }}" class="btn btn-sm btn-outline-primary">
                                <i class="fas fa-edit"></i> Edit Organizer Profile
                            </a>
                            <a href="{{ url_for('submit_event') }}" class="btn btn-sm btn-success">
                                <i class="fas fa-plus"></i> Add New Event
                            </a>
                        </div>
                    </div>
                    {% else %}
                    <div class="profile-section mb-4">
                        <h4>Become an Event Organizer</h4>
                        <p>Want to create and publish events on FunList.ai?</p>
                        <a href="{{ url_for('become_organizer') }}" class="btn btn-primary">
                            <i class="fas fa-user-plus"></i> Become an Event Organizer
                        </a>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}