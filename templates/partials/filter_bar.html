
<div class="filter-bar mb-4">
    <form method="GET" action="" class="filter-form" id="filterForm">
        <div class="row g-2">
            <div class="col">
                <input type="text" class="form-control" id="search_location" name="search_location" placeholder="Search location..." value="{{ request.args.get('search_location', '') }}" oninput="this.form.submit()">
            </div>
            <div class="col">
                <select class="form-select" id="category" name="category" onchange="this.form.submit()">
                    <option value="">All Categories</option>
                    <option value="music" {% if request.args.get('category') == 'music' %}selected{% endif %}>Music</option>
                    <option value="sports" {% if request.args.get('category') == 'sports' %}selected{% endif %}>Sports</option>
                    <option value="arts" {% if request.args.get('category') == 'arts' %}selected{% endif %}>Arts</option>
                    <option value="food" {% if request.args.get('category') == 'food' %}selected{% endif %}>Food</option>
                    <option value="other" {% if request.args.get('category') == 'other' %}selected{% endif %}>Other</option>
                </select>
            </div>
            <div class="col">
                <select class="form-select" id="dateRange" name="date_range" onchange="handleDateRangeChange(this)">
                    <option value="">Any Date</option>
                    <option value="today" {% if request.args.get('date_range') == 'today' %}selected{% endif %}>Today</option>
                    <option value="tomorrow" {% if request.args.get('date_range') == 'tomorrow' %}selected{% endif %}>Tomorrow</option>
                    <option value="weekend" {% if request.args.get('date_range') == 'weekend' %}selected{% endif %}>This Weekend</option>
                    <option value="week" {% if request.args.get('date_range') == 'week' %}selected{% endif %}>This Week</option>
                    <option value="specific" {% if request.args.get('date_range') == 'specific' %}selected{% endif %}>Specific Date</option>
                </select>
                <input type="date" class="form-control mt-2" id="specificDate" name="specific_date" 
                       style="display: {% if request.args.get('date_range') == 'specific' %}block{% else %}none{% endif %};"
                       value="{{ request.args.get('specific_date', '') }}"
                       onchange="this.form.submit()">
            </div>
            <div class="col">
                <select class="form-select" id="fun_rating" name="fun_rating" onchange="this.form.submit()">
                    <option value="">All Fun Ratings</option>
                    <option value="5" {% if request.args.get('fun_rating') == '5' %}selected{% endif %}>⭐⭐⭐⭐⭐ (5)</option>
                    <option value="4" {% if request.args.get('fun_rating') == '4' %}selected{% endif %}>⭐⭐⭐⭐ (4+)</option>
                    <option value="3" {% if request.args.get('fun_rating') == '3' %}selected{% endif %}>⭐⭐⭐ (3+)</option>
                    <option value="2" {% if request.args.get('fun_rating') == '2' %}selected{% endif %}>⭐⭐ (2+)</option>
                    <option value="1" {% if request.args.get('fun_rating') == '1' %}selected{% endif %}>⭐ (1+)</option>
                </select>
            </div>
        </div>
    </form>
</div>
<!-- Desktop Filter Bar -->
<div class="filter-bar d-none d-md-flex row align-items-center mb-3">
    <div class="col">
        <input type="text" name="search_location" class="form-control" placeholder="Search location...">
    </div>
    <div class="col">
        <select name="category" class="form-select">
            <option value="">All Categories</option>
            <option value="Sports">Sports</option>
            <option value="Music">Music</option>
            <option value="Arts">Arts</option>
            <option value="Food">Food</option>
            <option value="Other">Other</option>
        </select>
    </div>
    <div class="col">
        <select name="date_range" class="form-select" onchange="handleDateRangeChange(this)">
            <option value="">Any Date</option>
            <option value="today">Today</option>
            <option value="tomorrow">Tomorrow</option>
            <option value="weekend">This Weekend</option>
            <option value="week">This Week</option>
            <option value="specific">Specific Date</option>
        </select>
    </div>
    <div class="col">
        <input type="date" id="specificDate" name="specific_date" class="form-control" style="display: none;">
    </div>
    <div class="col">
        <select name="fun_rating" class="form-select">
            <option value="">Any Rating</option>
            <option value="5">⭐⭐⭐⭐⭐</option>
            <option value="4">⭐⭐⭐⭐</option>
            <option value="3">⭐⭐⭐</option>
        </select>
    </div>
</div>

<!-- Mobile Filter Bar -->
<div class="filter-bar-mobile d-flex d-md-none flex-column mb-3">
    <div class="d-flex gap-2 mb-2">
        <input type="text" name="search_location" class="form-control" placeholder="Search location...">
        <button type="button" class="btn btn-primary" data-bs-toggle="collapse" data-bs-target="#mobileFilters">
            <i class="fas fa-filter"></i>
        </button>
    </div>
    
    <div id="mobileFilters" class="collapse">
        <div class="card card-body">
            <div class="mb-2">
                <label class="form-label">Category</label>
                <select name="category" class="form-select">
                    <option value="">All Categories</option>
                    <option value="Sports">Sports</option>
                    <option value="Music">Music</option>
                    <option value="Arts">Arts</option>
                    <option value="Food">Food</option>
                    <option value="Other">Other</option>
                </select>
            </div>
            <div class="mb-2">
                <label class="form-label">Date</label>
                <select name="date_range" class="form-select" onchange="handleDateRangeChange(this)">
                    <option value="">Any Date</option>
                    <option value="today">Today</option>
                    <option value="tomorrow">Tomorrow</option>
                    <option value="weekend">This Weekend</option>
                    <option value="week">This Week</option>
                    <option value="specific">Specific Date</option>
                </select>
            </div>
            <div class="mb-2">
                <input type="date" id="specificDate-mobile" name="specific_date" class="form-control" style="display: none;">
            </div>
            <div class="mb-2">
                <label class="form-label">Fun Rating</label>
                <select name="fun_rating" class="form-select">
                    <option value="">Any Rating</option>
                    <option value="5">⭐⭐⭐⭐⭐</option>
                    <option value="4">⭐⭐⭐⭐</option>
                    <option value="3">⭐⭐⭐</option>
                </select>
            </div>
        </div>
    </div>
</div>

<!-- View Toggle -->
<div class="view-toggle mb-3">
    <div class="btn-group" role="group" aria-label="View Toggle">
        <button type="button" class="btn btn-outline-primary" onclick="window.location.href='/map'">
            <i class="fas fa-map-marker-alt"></i><span class="d-none d-md-inline ms-2">Map</span>
        </button>
        <button type="button" class="btn btn-outline-primary" onclick="window.location.href='/events'">
            <i class="fas fa-list"></i><span class="d-none d-md-inline ms-2">List</span>
        </button>
    </div>
</div>
