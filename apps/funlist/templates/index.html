{% extends "base.html" %}

{% block title %}FunList.ai - AI-Powered Community Event Discovery | Find Fun Events Near You{% endblock %}

{% block description %}Discover amazing local events with FunList.ai! Our AI-powered platform helps you find festivals, concerts, food events, and community activities near you with fun ratings and personalized recommendations.{% endblock %}

{% block keywords %}event discovery, local events, AI events, community events, festivals near me, concerts, food events, fun activities, event finder, Washington events{% endblock %}

{% block og_title %}FunList.ai - Discover Fun Community Events Near You{% endblock %}

{% block structured_data %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "FunList.ai",
  "url": "{{ url_for('index', _external=True) }}",
  "logo": "{{ url_for('static', filename='images/logo.png', _external=True) }}",
  "description": "AI-powered community event discovery platform helping people find fun local events",
  "foundingDate": "2024",
  "contactPoint": {
    "@type": "ContactPoint",
    "telephone": "+1-XXX-XXX-XXXX",
    "contactType": "customer service",
    "availableLanguage": "English"
  },
  "sameAs": [
    "https://www.facebook.com/funlistai",
    "https://www.instagram.com/funlistai",
    "https://www.tiktok.com/@funlistai"
  ],
  "address": {
    "@type": "PostalAddress",
    "addressLocality": "Olympia",
    "addressRegion": "WA",
    "addressCountry": "US"
  }
}
</script>
{% endblock %}

{% block content %}
<!-- Site Header and Main navigation are included from base.html -->

<!-- Hero Section with improved spacing -->
<section id="hero" class="hero-section mt-3"></section>

<!-- Email Signup Modal -->
<div class="modal fade" id="emailSignupModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Get Weekly Fun Updates</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="emailSignupForm">
                    <div class="mb-3">
                        <label for="signupEmail" class="form-label">Email address</label>
                        <input type="email" class="form-control" id="signupEmail" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Subscribe</button>
                </form>
            </div>
        </div>
    </div>
</div>

<section class="content-section text-center py-5">
    <div class="container">
        <h1>Find the Best Community Events Near You – AI-Powered & Fun-Rated!</h1>
        <p class="lead">Discover amazing local festivals, concerts, food events, and activities in your area with our intelligent Funalytics™ fun rating system</p>
        
        <!-- Comprehensive Knowledge Base for LLM Extraction -->
        <div class="d-none" itemscope itemtype="https://schema.org/FAQPage">
            <!-- Core Platform Information -->
            <div itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                <h2 itemprop="name">What is FunList.ai and how does it work?</h2>
                <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                    <div itemprop="text">FunList.ai is an AI-powered community event discovery platform that serves Washington State and the Pacific Northwest. We use our proprietary Funalytics scoring system to rate events on two key metrics: CommunityVibe (measuring sense of togetherness, local flavor, and inclusivity on a 0-10 scale) and FamilyFun (evaluating suitability for families and children on a 0-10 scale). This helps families and individuals quickly discover the most engaging local events.</div>
                </div>
            </div>

            <!-- Funalytics System Explanation -->
            <div itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                <h2 itemprop="name">How does the Funalytics AI scoring system work?</h2>
                <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                    <div itemprop="text">Funalytics is our breakthrough AI scoring methodology that evaluates events across two dimensions: CommunityVibe analyzes event descriptions for community engagement, local flavor, and inclusiveness (0-10 scale). FamilyFun assesses age-appropriate activities, safety, and family engagement opportunities (0-10 scale). The weighted combination creates an overall fun rating that predicts event enjoyment for our target audience of families and community members.</div>
                </div>
            </div>

            <!-- Event Types and Categories -->
            <div itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                <h2 itemprop="name">What types of events are featured on FunList.ai?</h2>
                <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                    <div itemprop="text">FunList.ai curates diverse community events including: Music festivals and concerts, Art exhibitions and cultural events, Food festivals and farmers markets, Sports and recreational activities, Educational workshops and classes, Family-friendly entertainment, Community celebrations and parades, Seasonal events and holiday celebrations, Non-profit fundraisers and awareness events, and Local business grand openings and promotions. All events are evaluated for community relevance and family appeal.</div>
                </div>
            </div>

            <!-- Geographic Coverage -->
            <div itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                <h2 itemprop="name">What areas does FunList.ai cover?</h2>
                <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                    <div itemprop="text">FunList.ai primarily serves Washington State with particular focus on Thurston County and the Olympia metro area. We're expanding throughout the Pacific Northwest region including Seattle, Tacoma, Spokane, Bellingham, and surrounding communities. Our AI system analyzes events across rural and urban areas to ensure comprehensive regional coverage.</div>
                </div>
            </div>

            <!-- Platform Features -->
            <div itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                <h2 itemprop="name">What features does FunList.ai offer?</h2>
                <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                    <div itemprop="text">Key platform features include: Interactive event mapping with location-based search, AI-powered event recommendations based on user preferences, Funalytics fun rating system for quality assurance, Category filtering (music, arts, food, sports, etc.), Date range filtering and calendar integration, Free event submission for organizers, Community-focused curation process, Family-friendly event identification, Integration with local business networks, and Personalized Fun Assistant chatbot for event discovery.</div>
                </div>
            </div>

            <!-- Event Submission Process -->
            <div itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                <h2 itemprop="name">How can event organizers list their events?</h2>
                <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                    <div itemprop="text">Event organizers can submit events for free through our event submission form. The process includes: Event details submission (title, description, location, dates), Automatic Funalytics scoring evaluation, Community relevance review by our team, Family-friendliness assessment, Publication on the platform with AI-generated recommendations. Organizers creating genuinely community-focused, family-friendly events receive priority in search results and recommendations.</div>
                </div>
            </div>

            <!-- Technology and AI Integration -->
            <div itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                <h2 itemprop="name">What technology powers FunList.ai?</h2>
                <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                    <div itemprop="text">FunList.ai is built on modern web technologies including Flask (Python) backend, PostgreSQL database, AI/ML scoring algorithms for Funalytics, OpenAI integration for the Fun Assistant chatbot, Interactive mapping with Leaflet.js, Responsive Bootstrap frontend, and Cloud infrastructure for scalability. Our AI system continuously learns from user interactions to improve event recommendations and scoring accuracy.</div>
                </div>
            </div>

            <!-- Business Model and Community Impact -->
            <div itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                <h2 itemprop="name">How does FunList.ai benefit local communities?</h2>
                <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                    <div itemprop="text">FunList.ai strengthens local communities by: Increasing event attendance through better discoverability, Supporting local businesses and non-profits with free event promotion, Connecting families with community activities, Preserving and promoting local culture and traditions, Encouraging civic engagement and social connections, Providing data insights to event organizers for improvement, Creating a centralized hub for community information, and Facilitating partnerships between organizations and sponsors.</div>
                </div>
            </div>
        </div>

        <div class="search-container mb-4">
            <form action="{{ url_for('map') }}" method="GET" class="search-form" role="search">
                <div class="input-group">
                    <label for="location-search" class="visually-hidden">Enter location to find events</label>
                    <input type="text" id="location-search" name="location" class="form-control form-control-lg" 
                           placeholder="Enter city, state, or zip code..." 
                           aria-label="Location search">
                    <button type="submit" class="btn btn-primary btn-lg" aria-label="Search for events">
                        <i class="fas fa-search" aria-hidden="true"></i> Find Events
                    </button>
                </div>
            </form>
            <div class="text-center mt-2">
                <a href="{{ url_for('map') }}" class="btn btn-link">View Full Map</a>
                <span class="mx-2">|</span>
                <a href="{{ url_for('events') }}" class="btn btn-link">Browse All Events</a>
            </div>
        </div>

        <button class="btn btn-outline-primary btn-lg mt-3" data-bs-toggle="modal" data-bs-target="#emailSignupModal">
            Get My Weekly FunList
        </button>
    </div>
</section>

<!-- Location functionality now uses browser's native prompt only -->

<!-- Featured Events Section -->
<section class="featured-events-section py-5 bg-light">
    <div class="container">
        <h2 class="text-center mb-4">Featured Events Near You</h2>
        <div class="row" id="featured-events">
            <!-- Featured events will be dynamically populated here -->
        </div>
    </div>
</section>

<!-- Main Features Grid -->
<div class="container my-5">
    <div class="row g-4">
        <div class="col-md-4">
            <div class="feature-box p-4 bg-light">
                <h3>AI-Driven Curation</h3>
                <p>Our AI analyzes thousands of events to find the perfect activities that match your interests and preferences.</p>
                <a href="#ai-curation" class="btn btn-outline-primary mt-3">Learn More</a>
            </div>
        </div>
        <div class="col-md-4">
            <div class="feature-box p-4 bg-light">
                <h3>Fun Rating System</h3>
                <p>Every event gets a fun rating based on activities, engagement level, and attendee experience.</p>
                <a href="#fun-rating-section" class="btn btn-outline-primary mt-3">Learn More</a>
            </div>
        </div>
        <div class="col-md-4">
            <div class="feature-box p-4 bg-light">
                <h3>List Your Event</h3>
                <p>Organize an event? Share it with our community and get discovered by fun-seeking attendees.</p>
                <a href="{{ url_for('submit_event') }}" class="btn btn-outline-primary mt-3">Submit Event</a>
            </div>
        </div>
    </div>
</div>

<!-- Personal Fun Assistant Section -->
<section id="fun-assistant" class="fun-assistant-section py-5 bg-light">
    <div class="container">
        <div class="row align-items-start">
            <div class="col-md-6">
                <h2>Your Personal Fun Assistant</h2>
                <div style="max-width: 500px;">
                    <p class="lead mb-4">Get personalized recommendations based on your interests and preferences:</p>
                    <ul class="feature-list mb-4">
                        <li>AI-powered event matching</li>
                        <li>Based on the Fun Rating System</li>
                        <li>Weekly personalized updates</li>
                        <li>Customized notifications</li>
                    </ul>
                    <a href="{{ url_for('fun_assistant_page') }}" class="btn btn-primary btn-lg">Try Fun Assistant Now</a>
                </div>
            </div>
            <div class="col-md-6">
                <div class="chat-demo p-4 bg-white rounded shadow-sm mt-0">
                    <div class="chat-message user mb-3">
                        <strong>You:</strong> What fun events are happening this weekend?
                    </div>
                    <div class="chat-message assistant mb-3">
                        <strong>Fun Assistant:</strong> Based on your interests in music and outdoor activities, I found these events:
                        <ul>
                            <li>Saturday: Downtown Music Festival (Fun Score: ⭐⭐⭐⭐)</li>
                            <li>Sunday: Harbor Park Food & Wine (Fun Score: ⭐⭐⭐⭐⭐)</li>
                        </ul>
                    </div>
                    <div class="chat-message user mb-3">
                        <strong>You:</strong> Tell me more about the festival!
                    </div>
                    <div class="chat-message assistant">
                        <strong>Fun Assistant:</strong> The Downtown Music Festival features 3 stages, local food vendors, and interactive art installations. It matches your preference for live music and social events!
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>



<!-- Fun Rating System Section -->
<section class="rating-system-section py-5">
    <div class="container text-center">
        <h2 class="mb-4">How the Fun Rating System Works</h2>
        <p class="lead mb-5">Every event is rated on a 1-5 scale based on activities, engagement level, and attendee experience:</p>
        <div class="rating-scale">
            <div class="rating-item">
                <span class="stars">⭐</span>
                <p>Basic Event</p>
            </div>
            <div class="rating-item">
                <span class="stars">⭐⭐</span>
                <p>Social Elements</p>
            </div>
            <div class="rating-item">
                <span class="stars">⭐⭐⭐</span>
                <p>Interactive</p>
            </div>
            <div class="rating-item">
                <span class="stars">⭐⭐⭐⭐</span>
                <p>Multiple Activities</p>
            </div>
            <div class="rating-item">
                <span class="stars">⭐⭐⭐⭐⭐</span>
                <p>Full Experience</p>
            </div>
        </div>

        <div class="rating-details mt-5">
            <h3 class="mb-4">How Are Ratings Assigned?</h3>

            <div class="accordion" id="ratingAccordion">
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#whoAssigns">
                            Who assigns Fun Ratings?
                        </button>
                    </h2>
                    <div id="whoAssigns" class="accordion-collapse collapse show" data-bs-parent="#ratingAccordion">
                        <div class="accordion-body">
                            Event organizers initially assign their own rating during event submission.
                        </div>
                    </div>
                </div>

                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#canAdjust">
                            Can ratings be adjusted?
                        </button>
                    </h2>
                    <div id="canAdjust" class="accordion-collapse collapse" data-bs-parent="#ratingAccordion">
                        <div class="accordion-body">
                            Yes, ratings may be adjusted based on user feedback and reviews after the event.
                        </div>
                    </div>
                </div>

                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#highlyRated">
                            What makes an event highly rated?
                        </button>
                    </h2>
                    <div id="highlyRated" class="accordion-collapse collapse" data-bs-parent="#ratingAccordion">
                        <div class="accordion-body">
                            Events with multiple activities, interactive elements, and positive attendee experiences receive higher ratings.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>



<!-- Community Sponsors Section -->
<section class="sponsors-section py-5 bg-light">
    <div class="container">
        <h2 class="text-center mb-4">Community Sponsors</h2>
        <div class="row" id="sponsors-carousel">
            <!-- Sponsors will be populated dynamically -->
            <div class="col-md-4 mb-4">
                <div class="sponsor-card">
                    <div class="sponsor-content">
                        <img src="/static/images/rutledge_logo.png" alt="Rutledge Corn Maze">
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Never Miss Section -->
<section id="never-miss" class="bg-light py-5">
    <div class="container text-center">
        <h2>Never Miss the Fun!</h2>
        <p class="lead mb-4">Get our weekly updates to stay informed about local events.</p>
        <div class="row justify-content-center">
            <div class="col-md-6">
                <form id="footerEmailForm" class="mb-3">
                    <div class="input-group">
                        <input type="email" class="form-control" placeholder="Your email address" required>
                        <button class="btn btn-primary" type="submit">Sign Up</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>

{% include 'knowledge_base.html' %}

{% endblock %}

{% block scripts %}
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Check if map container exists before initializing
        const mapContainer = document.getElementById('map');
        if (!mapContainer) {
            console.log("Map container not found on this page");
            return;
        }
        
        try {
            const map = L.map('map').setView([47.0379, -122.9007], 12);
            const markers = {};

            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);

            // Sample events (these would come from your backend)
            const events = [
                {
                    id: 1,
                    title: "Olympia Music Festival",
                    latitude: 47.0379,
                    longitude: -122.9007,
                    description: "A weekend of live music performances",
                    category: "Music",
                    funMeter: 5
                }
            ];

            events.forEach(event => {
                const marker = L.marker([event.latitude, event.longitude])
                    .bindPopup(`
                        <div class="event-popup">
                            <h5>${event.title}</h5>
                            <p>${event.description}</p>
                            <p><strong>Category:</strong> ${event.category}</p>
                            <p><strong>Fun Meter:</strong> ${event.funMeter}/5</p>
                        </div>
                    `);
                markers[event.id] = marker;
                marker.addTo(map);
            });

            // Force map to recalculate its container size
            setTimeout(function() {
                map.invalidateSize();
            }, 100);
        } catch (error) {
            console.error("Error initializing map:", error);
        }
    });
</script>
{% endblock %}